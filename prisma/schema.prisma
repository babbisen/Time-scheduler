generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Person {
  id      String  @id
  name    String
  color   String
  blocks  Block[]
  history History[] @relation("HistoryTarget")
  actions History[] @relation("HistoryActor")
}

model Block {
  id       String   @id
  personId String
  person   Person   @relation(fields: [personId], references: [id])
  start    DateTime
  end      DateTime
}

model History {
  id             String   @id
  timestamp      DateTime
  actorPersonId  String?
  targetPersonId String?
  actorPerson    Person?  @relation("HistoryActor", fields: [actorPersonId], references: [id])
  targetPerson   Person?  @relation("HistoryTarget", fields: [targetPersonId], references: [id])
  action         String
  details        String
}
